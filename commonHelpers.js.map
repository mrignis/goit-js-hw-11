{"version":3,"file":"commonHelpers.js","sources":["../src/public/image.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '42103820-367af78541649bbd92098b568';\n\nexport default class ImagesApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  async getImage() {\n    try {\n      const response = await axios.get(BASE_URL, {\n        params: {\n          key: API_KEY,\n          q: this.searchQuery,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          safesearch: 'true',\n          per_page: 40,\n          page: this.page,\n        },\n      });\n\n      this.page += 1;\n      return response.data;\n    } catch (error) {\n      console.error('Error fetching images:', error);\n      throw error;\n    }\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n","import { Notify } from 'notiflix/build/notiflix-notify-aio';\nimport ImagesApiService from './public/image';\n\nconst imageApiService = new ImagesApiService();\nconst form = document.querySelector('form#search-form');\nconst gallery = document.querySelector('div.gallery');\nconst loadMoreBtn = document.querySelector('button.load-more');\n\nform.addEventListener('submit', onSubmit);\nloadMoreBtn.addEventListener('click', onLoadMore);\n// let queriesArray = [];\n\nfunction onSubmit(e) {\n  e.preventDefault();\n  loadMoreBtn.classList.add('is-hidden');\n  gallery.innerHTML = '';\n  imageApiService.query = e.currentTarget.elements.searchQuery.value.trim();\n  imageApiService.resetPage();\n  if (imageApiService.query === '') {\n    Notify.info('Please enter your search query!');\n    return;\n  } else {\n    imageApiService\n      .getImage()\n      .then(data => {\n        let queriesArray = data.hits;\n        if (queriesArray.length === 0) {\n          Notify.failure(\n            'Sorry, there are no images matching your search query. Please try again.'\n          );\n        } else if (queriesArray.length < 40) {\n          renderImages(queriesArray);\n          loadMoreBtn.classList.add('is-hidden');\n          Notify.success(`Hooray! We found ${data.totalHits} images.`);\n          // Notify.info(\n          //   \"We're sorry, but you've reached the end of search results.\"\n          // );\n        } else {\n          renderImages(queriesArray);\n          Notify.success(`Hooray! We found ${data.totalHits} images.`);\n          loadMoreBtn.classList.remove('is-hidden');\n        }\n      })\n      .catch(error => {\n        Notify.info(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        console.log(error);\n      });\n  }\n}\n\nfunction onLoadMore() {\n  imageApiService.getImage().then(data => {\n    let queriesArray = data.hits;\n    renderImages(queriesArray);\n    if (queriesArray.length < 40) {\n      loadMoreBtn.classList.add('is-hidden');\n      Notify.info(\"We're sorry, but you've reached the end of search results.\");\n      // gallery.insertAdjacentHTML(\n      //   'afterend',\n      //   `<p>We're sorry, but you've reached the end of search results.</p>`\n      // );\n    }\n  });\n}\n\nfunction renderImages(queriesArray) {\n  const markup = queriesArray\n    .map(item => {\n      return `<div class=\"photo-card\">\n  <div class=\"thumb\"><img src=\"${item.webformatURL}\" alt=\"${item.tags}\" loading=\"lazy\" /></div>\n  <div class=\"info\">\n    <p class=\"info-item\">\n      <b>Likes</b><span>${item.likes}</span>\n    </p>\n    <p class=\"info-item\">\n      <b>Views</b><span>${item.views}</span>\n    </p>\n    <p class=\"info-item\">\n      <b>Comments</b><span>${item.comments}</span>\n    </p>\n    <p class=\"info-item\">\n      <b>Downloads</b><span>${item.downloads}</span>\n    </p>\n  </div>\n</div>`;\n    })\n    .join('');\n  gallery.insertAdjacentHTML('beforeend', markup);\n}\n"],"names":["BASE_URL","API_KEY","ImagesApiService","response","axios","error","newQuery","imageApiService","form","gallery","loadMoreBtn","onSubmit","onLoadMore","e","Notify","data","queriesArray","renderImages","markup","item"],"mappings":"6vBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAED,MAAMC,CAAiB,CACpC,aAAc,CACZ,KAAK,YAAc,GACnB,KAAK,KAAO,CACb,CAED,MAAM,UAAW,CACf,GAAI,CACF,MAAMC,EAAW,MAAMC,EAAM,IAAIJ,EAAU,CACzC,OAAQ,CACN,IAAKC,EACL,EAAG,KAAK,YACR,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,SAAU,GACV,KAAM,KAAK,IACZ,CACT,CAAO,EAED,YAAK,MAAQ,EACNE,EAAS,IACjB,OAAQE,EAAP,CACA,cAAQ,MAAM,yBAA0BA,CAAK,EACvCA,CACP,CACF,CAED,WAAY,CACV,KAAK,KAAO,CACb,CAED,IAAI,OAAQ,CACV,OAAO,KAAK,WACb,CAED,IAAI,MAAMC,EAAU,CAClB,KAAK,YAAcA,CACpB,CACH,CCzCA,MAAMC,EAAkB,IAAIL,EACtBM,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAU,SAAS,cAAc,aAAa,EAC9CC,EAAc,SAAS,cAAc,kBAAkB,EAE7DF,EAAK,iBAAiB,SAAUG,CAAQ,EACxCD,EAAY,iBAAiB,QAASE,CAAU,EAGhD,SAASD,EAASE,EAAG,CAMnB,GALAA,EAAE,eAAc,EAChBH,EAAY,UAAU,IAAI,WAAW,EACrCD,EAAQ,UAAY,GACpBF,EAAgB,MAAQM,EAAE,cAAc,SAAS,YAAY,MAAM,OACnEN,EAAgB,UAAS,EACrBA,EAAgB,QAAU,GAAI,CAChCO,SAAO,KAAK,iCAAiC,EAC7C,MACJ,MACIP,EACG,SAAU,EACV,KAAKQ,GAAQ,CACZ,IAAIC,EAAeD,EAAK,KACpBC,EAAa,SAAW,EAC1BF,EAAAA,OAAO,QACL,0EACZ,EACmBE,EAAa,OAAS,IAC/BC,EAAaD,CAAY,EACzBN,EAAY,UAAU,IAAI,WAAW,EACrCI,EAAM,OAAC,QAAQ,oBAAoBC,EAAK,mBAAmB,IAK3DE,EAAaD,CAAY,EACzBF,EAAM,OAAC,QAAQ,oBAAoBC,EAAK,mBAAmB,EAC3DL,EAAY,UAAU,OAAO,WAAW,EAElD,CAAO,EACA,MAAML,GAAS,CACdS,EAAAA,OAAO,KACL,4DACV,EACQ,QAAQ,IAAIT,CAAK,CACzB,CAAO,CAEP,CAEA,SAASO,GAAa,CACpBL,EAAgB,SAAQ,EAAG,KAAKQ,GAAQ,CACtC,IAAIC,EAAeD,EAAK,KACxBE,EAAaD,CAAY,EACrBA,EAAa,OAAS,KACxBN,EAAY,UAAU,IAAI,WAAW,EACrCI,SAAO,KAAK,4DAA4D,EAM9E,CAAG,CACH,CAEA,SAASG,EAAaD,EAAc,CAClC,MAAME,EAASF,EACZ,IAAIG,GACI;AAAA,iCACoBA,EAAK,sBAAsBA,EAAK;AAAA;AAAA;AAAA,0BAGvCA,EAAK;AAAA;AAAA;AAAA,0BAGLA,EAAK;AAAA;AAAA;AAAA,6BAGFA,EAAK;AAAA;AAAA;AAAA,8BAGJA,EAAK;AAAA;AAAA;AAAA,OAI9B,EACA,KAAK,EAAE,EACVV,EAAQ,mBAAmB,YAAaS,CAAM,CAChD"}